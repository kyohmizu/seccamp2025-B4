# 演習3 セキュリティアセスメント

本演習では、無敗塾のシステムを対象にセキュリティアセスメントを実践してみます。

## 演習の目的

- ルールベースとリスクベースのセキュリティアプローチを実際のシステムに適用する
- システムの探索や机上での脅威分析により、セキュリティリスクを発見する
- 多層防御の観点からセキュリティギャップを特定する
- セキュリティ対策の費用対効果を考慮した優先順位付けを行う

## グループワーク: セキュリティリスクの発見と評価

各グループは以下のアプローチを組み合わせて、システムのセキュリティリスクを発見・評価してください。

### アプローチ1: システム探索によるリスク発見

**ヒント:**
- Kubernetesクラスタの設定状況を調査する
- デプロイされたアプリケーションの構成を確認する
- セキュリティスキャンツールを活用する
- ネットワーク設定やアクセス制御を調べる

**調査のきっかけとなるコマンド例:**
```bash
# クラスタの基本情報確認
kubectl cluster-info
kubectl get nodes -o wide

# デプロイされているリソースの確認
kubectl get all --all-namespaces
kubectl get secrets,configmaps --all-namespaces

# セキュリティ関連設定の確認
kubectl get networkpolicy --all-namespaces
kubectl get psp,podsecuritypolicy --all-namespaces
```

### アプローチ2: 脅威リストを活用した分析

**参考資料:**
- [クラウドネイティブ環境の脅威と対策](./threat_lits.md)
- [無敗塾のデータフロー図](./dfd.md)

**検討の観点:**
- 各コンポーネント間の信頼境界はどこか？
- STRIDE（なりすまし、改ざん、否認、情報漏洩、サービス拒否、権限昇格）の観点で何が起こり得るか？
- 攻撃者はどのような経路でシステムに侵入できるか？

## リスク評価と優先順位付け

発見したリスクについて、以下の観点で評価・優先順位付けを行ってください。

### リスクの定量評価

**影響度の評価:**
- 低: 限定的な影響（一部機能停止、少量データ漏洩）
- 中: 中程度の影響（サービス一時停止、ユーザーデータ漏洩）
- 高: 深刻な影響（長時間停止、全データ漏洩、法的責任）

**発生可能性の評価:**
- 低: 高度なスキルと内部情報が必要
- 中: 一般的な攻撃手法で実行可能
- 高: 容易に実行可能な攻撃

### ビジネス観点での優先順位付け

以下の制約条件を考慮して、対応すべきリスクの優先順位を決定してください。

- **予算制約**: 限られたセキュリティ投資予算
- **開発効率**: 開発チームの生産性への影響最小化
- **コンプライアンス**: 個人情報保護法等の規制要件
- **サービス継続**: オンライン学習サービスの可用性確保

## 発表準備

各グループは発見したリスクと対策提案をまとめ、以下の構成で発表準備を行ってください。

### 発表構成
1. **発見した主要リスク**: システム探索・机上分析で特定した重要なセキュリティリスク（上位3つ）
2. **リスク評価と優先順位**: 影響度・発生可能性・ビジネス観点での優先度
3. **推奨対策**: 最優先で実施すべき対策とその選定理由

### 成果物例

**リスク一覧表:**
| リスクID | リスク内容 | 発見方法 | 影響度 | 可能性 | 優先度 | 推奨対策 |
|----------|-----------|----------|--------|--------|--------|----------|
| R001 | | システム探索 | 高 | 中 | 高 | |
| R002 | | 脅威リスト分析 | 中 | 高 | 中 | |

### 想定される質問と回答準備

**Q**: そのリスクはどのように発見したのか？<br/>
**A**: システム探索の具体的手法 or 脅威分析の観点を説明

**Q**: 他にも考えられる脅威はないか？<br/>
**A**: 時間制約で検討できなかった脅威や、今後の課題として認識している点を説明

**Q**: 対策のコストと効果をどう評価したか？<br/>
**A**: 実装工数、運用負荷、リスク軽減効果の観点から説明

---

## 次のステップ

演習完了後、[4章 セキュリティ対策の導入](../04_hardening/README.md) に進みます。
